抓果车 CAN 通讯协议

## 0. 约定

- **总线**：CAN
- **帧类型**：标准帧/扩展帧（本文仅描述应用层数据，若有要求请在实现侧固定）
- **帧 ID**：本文两类消息均使用 `0x30`，通过 `Byte0` 的“消息类型”进行区分。
- **字节序**：坐标采用 **小端序**（低位在前，高位在后）。
- **坐标单位**：未在原文定义；建议在实现中统一为 `mm` 并在此处固化。

## 1. 控制器请求果子位置（Request/Response）

### 1.1 帧 ID 与方向

- **控制器 -> 香橙派**：`0x30`（请求）
- **香橙派 -> 控制器**：`0x30`（响应）

### 1.2 请求帧数据格式（控制器发送）

该请求帧用于触发一次“果子位置”查询。

| Byte | 含义 |
|------|------|
| 0    | 消息类型：`0x22`（请求果子位置） |
| 1    | `0x22`（预留/固定值） |
| 2    | `0x22`（预留/固定值） |
| 3    | `0x22`（预留/固定值） |
| 4    | `0x22`（预留/固定值） |
| 5    | `0x22`（预留/固定值） |
| 6    | `0x22`（预留/固定值） |
| 7    | `0x22`（预留/固定值） |

### 1.3 响应帧数据格式（香橙派发送）

| Byte | 含义 |
|------|------|
| 0    | 消息类型：`0x08`（果子位置响应） |
| 1    | 预留（建议置 `0x00`） |
| 2    | X 低字节（Little-Endian LSB） |
| 3    | X 高字节（Little-Endian MSB） |
| 4    | Y 低字节（Little-Endian LSB） |
| 5    | Y 高字节（Little-Endian MSB） |
| 6    | Z 低字节（Little-Endian LSB） |
| 7    | Z 高字节（Little-Endian MSB） |

### 1.4 时序说明

- 控制器发送 1 帧请求，香橙派响应 1 帧。

## 2. 有人进入区域检测（周期上报）

### 2.1 帧 ID 与方向

- **香橙派 -> 控制器**：`0x30`

### 2.2 上报帧数据格式（香橙派发送）

| Byte | 含义 |
|------|------|
| 0    | 消息类型：`0x33`（人员进入区域告警） |
| 1    | `0x33`（预留/固定值） |
| 2    | `0x33`（预留/固定值） |
| 3    | `0x33`（预留/固定值） |
| 4    | `0x33`（预留/固定值） |
| 5    | `0x33`（预留/固定值） |
| 6    | `0x33`（预留/固定值） |
| 7    | `0x33`（预留/固定值） |

### 2.3 时序说明

- 当有人进入区域时，香橙派每隔 **100ms** 发送一次该告警帧。
- 当人离开区域时，香橙派停止发送。

## 3. 备注

- 如果你希望进一步提升可读性与扩展性，建议将不同消息拆成不同的 CAN ID（例如 `0x30` 用于果子位置，`0x31` 用于人员告警），避免仅靠 `Byte0` 区分类型。


## 4. 抓果车 CAN 通讯协议（原始描述对齐版）

### 4.1 控制器请求果的位置协议

| 方向 | 帧ID | 数据位0 | 数据位1 | 数据位2 | 数据位3 | 数据位4 | 数据位5 | 数据位6 | 数据位7 |
|---|---|---|---|---|---|---|---|---|---|
| 控制器发送 | `0x30` | `0x22` | `0x22` | `0x22` | `0x22` | `0x22` | `0x22` | `0x22` | `0x22` |
| 香橙派响应 | `0x30` | `0x08` | 空/预留 | X低位 | X高位 | Y低位 | Y高位 | Z低位 | Z高位 |

说明：控制器发送一帧请求，香橙派响应一帧。

### 4.2 有人进入区域检测协议

| 方向 | 帧ID | 数据位0 | 数据位1 | 数据位2 | 数据位3 | 数据位4 | 数据位5 | 数据位6 | 数据位7 |
|---|---|---|---|---|---|---|---|---|---|
| 香橙派发送 | `0x30` | `0x33` | `0x33` | `0x33` | `0x33` | `0x33` | `0x33` | `0x33` | `0x33` |

说明：有人进入区域时每隔 **100ms** 持续发送；人离开区域就停止发送。